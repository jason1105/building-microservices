## 第十章 康威定律和系统设计

康威定律：任何组织在设计一套系统（广义概念上的系统）时，所交付的设计方案在结构上都与该组织的沟通结构保持一致。

### 10.1 证据

1. 松耦合组织和紧耦合组织：一个例子：开源社区和商业产品公司。组织的耦合性越低，其模块化越好。
2. Windows Vista 通过相关的实验证明了康威定律。

### 10.2 Netflix 和 Amazon

两个披萨团队：没有一个团队应该大到两个披萨不够吃

原则：团队小而独立

### 10.3 我们能做什么

### 10.4 适应沟通途径

将一个服务交给一个稳定的，内聚的团队。

不要让一个团队负责许多服务，因为这容易造成服务之间紧密的集成。

### 10.5 服务所有权

授权团队对服务的完全拥有权

### 10.6 共享服务的原因

为什么使用单块服务呢？

1. 难以分割
2. 特性团队：基于特性开发的团队，以结果为导向，可能导致跨服务。例如：界面团队、数据库团队。

    缺点：服务缺少守护者，谁都可以修改服务。

3. 交付瓶颈：某个微服务团队如果因为某种原因无法交付新需求，则可能遇到下面的问题：

    1. 等待，等微服务团队归来
    2. 派其他人去那个微服务团队帮助他们
    3. 将新需求独立为一个单独的微服务
    
    共享服务可以解决上面三个问题。

### 10.7 内部开源

1. 代码守护者：对代码质量负责，是代码的核心提交者，外部修改者只能将代码交给守护者。
2. 成熟：只对外部修改者公开成熟稳定的代码。
3. 工具：使用支持pull请求的工具。

### 10.8 限界上下文和团队结构（推荐）

限界上下文与团队结构保持一致，好处：

1. 团队对领域的理解更深刻
2. 限界上下文内部的交互更便捷
3. 与业务干系人建立良好关系

### 10.9 孤儿服务

指的是长期不变的服务，即使是这样的服务，也需要有实际的拥有者。

### 10.10 案例：

原则：业务线内的服务之间可以自由通信，但业务线之间的通信必须是*异步批处理*。

### 10.11 反向康威定律

指的是系统设计能够改变组织结构。

### 10.12 人

### 10.13 小结

本章介绍了当组织规模化后将会遇到的问题，当然还包括其他一些技术问题。